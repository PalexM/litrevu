{% extends 'app/base.html' %}
{% load static %}
{% block content %}
{# Load the tag library #}
{% load bootstrap5 %}

{# Display django.contrib.messages as Bootstrap alerts #}

{# Display a form #}

<div class="container-fluid mt-5 text-center followers">
    <div class="row justify-content-center mt-3">
        {% bootstrap_messages %}
        <div class="col-md-3">
            <h2 class="mb-3 text-primary">Suivre d'autres utilisateurs</h2>
            <form action="{% url 'followers' %}" name="follow" method="post" class="form mx-auto">
                <div class="text-center">
                    {% csrf_token %}
                    {% bootstrap_form form %}
                    {% buttons %}
                    <button type="submit" class="btn btn-primary">
                        Submit
                    </button>
                    {% endbuttons %}
                </div>
            </form>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-md-3">
            <h2 class="mb-3 text-primary">Abonnements</h2>
            <ul class="list-group">
                {% for user in following %}
                <li class="list-group-item d-flex justify-content-between align-items-center">{{user.followed_user}}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-md-3">
            <h2 class="mb-3 text-primary">Abonnés</h2>
            <ul class="list-group">
                {% for user in followers %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{user.user}}

                    <!-- Formular pentru dezabonare -->
                    <form action="{% url 'followers' %}" name="unfollow" method="post" class="ml-2">
                        {% csrf_token %}
                        <input type="hidden" name="unfollow_user" value="{{user.user.id}}">
                        <button type="submit" class="btn btn-danger">Désabonner</button>
                    </form>

                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>


{% endblock content %}